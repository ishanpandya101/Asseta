<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Asseta | Enterprise v3.0</title>

    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #0f172a;
            
            --bg-body: #f8fafc;
            --bg-sidebar: #ffffff;
            --bg-card: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            --shadow-lg: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
        }

        body.dark-theme {
            --bg-body: #020617;
            --bg-sidebar: #0f172a;
            --bg-card: #1e293b;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --border: #334155;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; }
        
        body { background-color: var(--bg-body); color: var(--text-main); overflow-x: hidden; line-height: 1.5; }

        /* LAYOUT */
        .wrapper { display: flex; min-height: 100vh; }

        .sidebar {
            width: 280px; background: var(--bg-sidebar); border-right: 1px solid var(--border);
            height: 100vh; position: fixed; z-index: 50; padding: 32px 24px;
            display: flex; flex-direction: column; transition: 0.3s;
        }

        .logo { font-size: 24px; font-weight: 800; color: var(--primary); display: flex; align-items: center; gap: 12px; margin-bottom: 40px; }
        
        .nav-links { list-style: none; flex: 1; }
        .nav-item {
            display: flex; align-items: center; gap: 12px; padding: 14px 16px;
            color: var(--text-muted); border-radius: 12px; cursor: pointer;
            margin-bottom: 8px; font-weight: 600; font-size: 14px; transition: 0.2s all;
        }
        .nav-item:hover { background-color: var(--bg-body); color: var(--primary); }
        .nav-item.active { background-color: var(--primary); color: white; box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.3); }

        .main { margin-left: 280px; flex: 1; padding: 40px; width: calc(100% - 280px); }

        /* COMPONENTS */
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; }
        
        .search-box {
            background: var(--bg-card); border: 1px solid var(--border); padding: 12px 20px;
            border-radius: 14px; display: flex; align-items: center; width: 400px;
            box-shadow: var(--shadow-sm);
        }
        .search-box:focus-within { border-color: var(--primary); }
        .search-box input { border: none; outline: none; background: transparent; margin-left: 12px; width: 100%; color: var(--text-main); font-size: 14px; }

        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 24px; margin-bottom: 40px; }
        .stat-card {
            background: var(--bg-card); padding: 28px; border-radius: 24px;
            border: 1px solid var(--border); box-shadow: var(--shadow-sm);
            display: flex; align-items: center; justify-content: space-between;
        }
        .stat-icon { width: 56px; height: 56px; border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 24px; }

        .charts-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 24px; margin-bottom: 40px; }
        @media (max-width: 1100px) { .charts-grid { grid-template-columns: 1fr; } }

        .card { background: var(--bg-card); border-radius: 24px; border: 1px solid var(--border); padding: 24px; box-shadow: var(--shadow-sm); }

        /* TABLES */
        .table-wrapper { background: var(--bg-card); border-radius: 24px; border: 1px solid var(--border); overflow: hidden; }
        .table-header { padding: 24px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        table { width: 100%; border-collapse: collapse; }
        th { padding: 16px 24px; background: var(--bg-body); color: var(--text-muted); font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
        td { padding: 18px 24px; border-bottom: 1px solid var(--border); font-size: 14px; color: var(--text-main); }
        
        /* VENDOR GRID */
        .vendor-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 24px; }
        .vendor-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 20px; padding: 24px; transition: 0.2s; position: relative; }
        .vendor-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-md); border-color: var(--primary-light); }
        .vendor-actions { position: absolute; top: 20px; right: 20px; }

        /* SETTINGS GRID */
        .settings-grid { display: grid; grid-template-columns: 1fr 2fr; gap: 30px; }

        /* UI ELEMENTS */
        .btn { padding: 12px 24px; border-radius: 12px; border: none; font-weight: 700; cursor: pointer; display: inline-flex; align-items: center; gap: 8px; font-size: 14px; transition: 0.2s; }
        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; }
        .btn-outline { background: transparent; border: 1px solid var(--border); color: var(--text-main); }
        .btn-outline:hover { background: var(--bg-body); }
        
        .badge { padding: 6px 12px; border-radius: 10px; font-size: 11px; font-weight: 700; text-transform: uppercase; }
        .badge-success { background: rgba(16, 185, 129, 0.1); color: #10b981; }
        .badge-warning { background: rgba(245, 158, 11, 0.1); color: #f59e0b; }
        .badge-danger { background: rgba(239, 68, 68, 0.1); color: #ef4444; }

        /* MODAL */
        .modal { position: fixed; inset: 0; background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(8px); display: none; justify-content: center; align-items: center; z-index: 1000; padding: 20px; }
        .modal.active { display: flex; }
        .modal-content { background: var(--bg-card); width: 100%; max-width: 500px; border-radius: 28px; padding: 40px; box-shadow: var(--shadow-lg); }

        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-size: 13px; font-weight: 600; color: var(--text-muted); }
        .form-control { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid var(--border); background: var(--bg-body); color: var(--text-main); outline: none; }
        .form-control:focus { border-color: var(--primary); }

        .section { display: none; }
        .section.active { display: block; animation: fadeInUp 0.5s ease; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .empty-state { padding: 60px; text-align: center; color: var(--text-muted); }
        .toast-container { position: fixed; bottom: 30px; right: 30px; z-index: 9999; }
        .toast { background: var(--bg-card); border: 1px solid var(--border); padding: 16px 24px; border-radius: 16px; box-shadow: var(--shadow-lg); display: flex; align-items: center; gap: 12px; margin-top: 10px; animation: slideIn 0.3s forwards; }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }

        @media (max-width: 1024px) {
            .sidebar { transform: translateX(-100%); }
            .sidebar.active { transform: translateX(0); }
            .main { margin-left: 0; width: 100%; padding: 20px; }
            .mobile-toggle { display: block !important; }
            .settings-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="toast-container" id="toastContainer"></div>

<div class="wrapper">
    <aside class="sidebar" id="sidebar">
        <div class="logo"><i class="fas fa-layer-group"></i> Asseta</div>
        <ul class="nav-links">
            <li class="nav-item active" onclick="switchTab('dashboard', this)"><i class="fas fa-chart-line"></i> Dashboard</li>
            <li class="nav-item" onclick="switchTab('assets', this)"><i class="fas fa-boxes-stacked"></i> Assets</li>
            <li class="nav-item" onclick="switchTab('products', this)"><i class="fas fa-tags"></i> Products</li>
            <li class="nav-item" onclick="switchTab('vendors', this)"><i class="fas fa-store"></i> Vendors</li>
            <li class="nav-item" onclick="switchTab('users', this)"><i class="fas fa-user-gear"></i> User Directory</li>
            <li class="nav-item" onclick="switchTab('settings', this)"><i class="fas fa-sliders-h"></i> Settings</li>
        </ul>
        <div style="margin-top: auto;">
            <button class="nav-item" style="width: 100%; border: none; background: transparent;" onclick="logout()">
                <i class="fas fa-arrow-right-from-bracket"></i> Logout
            </button>
        </div>
    </aside>

    <main class="main">
        <header class="top-bar">
            <div style="display: flex; align-items: center; gap: 15px;">
                <button class="btn btn-outline mobile-toggle" style="display: none;" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
                <h1 id="pageTitle" style="font-size: 28px; font-weight: 800; letter-spacing: -0.5px;">Dashboard Overview</h1>
            </div>
            <div style="display: flex; align-items: center; gap: 20px;">
                <div class="search-box">
                    <i class="fas fa-search" style="color: var(--text-muted);"></i>
                    <input type="text" id="mainSearch" placeholder="Search..." onkeyup="handleGlobalSearch()">
                </div>
                <button class="btn btn-outline" style="border-radius: 14px; padding: 12px;" onclick="toggleTheme()" id="themeBtn"><i class="fas fa-moon"></i></button>
            </div>
        </header>

        <section id="dashboard" class="section active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div>
                        <p style="color: var(--text-muted); font-size: 13px; font-weight: 700;">TOTAL ASSETS</p>
                        <h2 style="font-size: 32px; margin-top: 5px;" id="statTotal">0</h2>
                    </div>
                    <div class="stat-icon" style="background: rgba(99, 102, 241, 0.1); color: var(--primary);"><i class="fas fa-box"></i></div>
                </div>
                <div class="stat-card">
                    <div>
                        <p style="color: var(--text-muted); font-size: 13px; font-weight: 700;">TOTAL PRODUCTS</p>
                        <h2 style="font-size: 32px; margin-top: 5px;" id="statProducts">0</h2>
                    </div>
                    <div class="stat-icon" style="background: rgba(236, 72, 153, 0.1); color: var(--secondary);"><i class="fas fa-tags"></i></div>
                </div>
                <div class="stat-card">
                    <div>
                        <p style="color: var(--text-muted); font-size: 13px; font-weight: 700;">VENDORS</p>
                        <h2 style="font-size: 32px; margin-top: 5px;" id="statVendors">0</h2>
                    </div>
                    <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: var(--success);"><i class="fas fa-store"></i></div>
                </div>
            </div>
            <div class="charts-grid">
                <div class="card">
                    <h3 style="margin-bottom: 25px; font-size: 18px;">Asset Value Growth (Last 6 Months)</h3>
                    <div style="height: 350px;"><canvas id="growthChart"></canvas></div>
                </div>
                <div class="card">
                    <h3 style="margin-bottom: 25px; font-size: 18px;">Operational Status</h3>
                    <div style="height: 350px; display: flex; align-items: center; justify-content: center;"><canvas id="statusChart"></canvas></div>
                </div>
            </div>
        </section>

        <section id="assets" class="section">
            <div class="table-wrapper">
                <div class="table-header">
                    <h3>Asset Inventory</h3>
                    <button class="btn btn-primary" onclick="openAssetModal()"><i class="fas fa-plus"></i> Add Asset</button>
                </div>
                <div style="overflow-x: auto;">
                    <table id="assetTable">
                        <thead>
                            <tr><th>Item Name</th><th>Category</th><th>User</th><th>Status</th><th>Cost</th><th style="text-align:right;">Action</th></tr>
                        </thead>
                        <tbody id="assetTableBody"></tbody>
                    </table>
                    <div id="assetEmpty" class="empty-state" style="display:none;">No assets found.</div>
                </div>
            </div>
        </section>

        <section id="products" class="section">
            <div class="table-wrapper">
                <div class="table-header">
                    <h3>Product Stock</h3>
                    <button class="btn btn-primary" onclick="openProductModal()"><i class="fas fa-plus"></i> Add Product</button>
                </div>
                <div style="overflow-x: auto;">
                    <table id="productTable">
                        <thead>
                            <tr><th>Product Name</th><th>SKU Code</th><th>Stock Qty</th><th>Price</th><th>Status</th><th style="text-align:right;">Action</th></tr>
                        </thead>
                        <tbody id="productTableBody"></tbody>
                    </table>
                    <div id="productEmpty" class="empty-state" style="display:none;">No products found.</div>
                </div>
            </div>
        </section>

        <section id="vendors" class="section">
            <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                <h3>Partner Vendors</h3>
                <button class="btn btn-primary" onclick="openVendorModal()"><i class="fas fa-plus"></i> Add Vendor</button>
            </div>
            <div id="vendorGrid" class="vendor-grid"></div>
            <div id="vendorEmpty" class="empty-state" style="display:none;">No vendors registered.</div>
        </section>

        <section id="users" class="section">
            <div class="card">
                <h3>User Directory</h3>
                <div class="stats-grid" style="margin-top: 25px;">
                    <div style="display: flex; align-items: center; gap: 15px; padding: 15px; border: 1px solid var(--border); border-radius: 15px;">
                        <img src="https://ui-avatars.com/api/?name=Ishan+Pandya&background=6366f1&color=fff" style="width: 50px; border-radius: 12px;">
                        <div><p style="font-weight: 700;">Ishan Pandya</p><p style="font-size: 12px; color: var(--text-muted);">Admin</p></div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; padding: 15px; border: 1px solid var(--border); border-radius: 15px;">
                        <img src="https://ui-avatars.com/api/?name=Sarah+Chen&background=ec4899&color=fff" style="width: 50px; border-radius: 12px;">
                        <div><p style="font-weight: 700;">Sarah Chen</p><p style="font-size: 12px; color: var(--text-muted);">Manager</p></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="settings" class="section">
             <div class="settings-grid">
                <div class="card">
                    <div style="text-align: center; padding: 20px;">
                        <img src="https://ui-avatars.com/api/?name=Admin+User&background=0f172a&color=fff&size=128" style="width: 100px; border-radius: 50%; margin-bottom: 15px;">
                        <h3>Admin User</h3>
                        <p style="color: var(--text-muted); font-size: 14px;">admin@asseta.com</p>
                        <button class="btn btn-outline" style="margin-top: 15px; width: 100%;">Edit Profile</button>
                    </div>
                </div>
                <div class="card">
                    <h3 style="margin-bottom: 20px;">System Preferences</h3>
                    <div class="form-group">
                        <label>Currency</label>
                        <select class="form-control"><option>USD ($)</option><option>INR (₹)</option></select>
                    </div>
                    <div class="form-group">
                        <label>Email Notifications</label>
                        <div style="display: flex; gap: 20px; margin-top: 10px;">
                            <label style="display: flex; align-items: center; gap: 8px; font-weight: 400;"><input type="checkbox" checked> Low Stock Alerts</label>
                            <label style="display: flex; align-items: center; gap: 8px; font-weight: 400;"><input type="checkbox" checked> New Signups</label>
                        </div>
                    </div>
                    <hr style="border: 0; border-top: 1px solid var(--border); margin: 20px 0;">
                    <div class="form-group">
                        <label style="color: var(--danger);">Danger Zone</label>
                        <button class="btn btn-outline" style="color: var(--danger); border-color: var(--danger); margin-top: 5px;" onclick="resetData()">Factory Reset Data</button>
                    </div>
                </div>
             </div>
        </section>
    </main>
</div>

<div class="modal" id="assetModal">
    <div class="modal-content">
        <h2 style="margin-bottom: 20px;">Manage Asset</h2>
        <input type="hidden" id="assetIndex">
        <div class="form-group"><label>Asset Name</label><input type="text" id="aName" class="form-control"></div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div class="form-group"><label>Category</label><select id="aCat" class="form-control"><option>Laptop</option><option>Monitor</option><option>Furniture</option><option>Electronics</option><option>Accessories</option></select></div>
            <div class="form-group"><label>Status</label><select id="aStatus" class="form-control"><option>Active</option><option>Repair</option></select></div>
        </div>
        <div class="form-group"><label>User</label><input type="text" id="aUser" class="form-control"></div>
        <div class="form-group"><label>Cost ($)</label><input type="number" id="aCost" class="form-control"></div>
        <div style="display: flex; justify-content: flex-end; gap: 10px;">
            <button class="btn btn-outline" onclick="closeModals()">Cancel</button>
            <button class="btn btn-primary" onclick="saveAsset()">Save</button>
        </div>
    </div>
</div>

<div class="modal" id="productModal">
    <div class="modal-content">
        <h2 style="margin-bottom: 20px;">Manage Product</h2>
        <input type="hidden" id="prodIndex">
        <div class="form-group"><label>Product Name</label><input type="text" id="pName" class="form-control"></div>
        <div class="form-group"><label>SKU / Code</label><input type="text" id="pSku" class="form-control"></div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div class="form-group"><label>Stock Qty</label><input type="number" id="pStock" class="form-control"></div>
            <div class="form-group"><label>Price ($)</label><input type="number" id="pPrice" class="form-control"></div>
        </div>
        <div style="display: flex; justify-content: flex-end; gap: 10px;">
            <button class="btn btn-outline" onclick="closeModals()">Cancel</button>
            <button class="btn btn-primary" onclick="saveProduct()">Save</button>
        </div>
    </div>
</div>

<div class="modal" id="vendorModal">
    <div class="modal-content">
        <h2 style="margin-bottom: 20px;">Manage Vendor</h2>
        <input type="hidden" id="vendIndex">
        <div class="form-group"><label>Company Name</label><input type="text" id="vName" class="form-control"></div>
        <div class="form-group"><label>Contact Person</label><input type="text" id="vPerson" class="form-control"></div>
        <div class="form-group"><label>Email</label><input type="email" id="vEmail" class="form-control"></div>
        <div class="form-group"><label>Phone</label><input type="tel" id="vPhone" class="form-control"></div>
        <div style="display: flex; justify-content: flex-end; gap: 10px;">
            <button class="btn btn-outline" onclick="closeModals()">Cancel</button>
            <button class="btn btn-primary" onclick="saveVendor()">Save</button>
        </div>
    </div>
</div>

<script>

const API_BASE = "https://asseta.onrender.com";

let assets = [];
let products = [];
let vendors = [];
let charts = {};

window.onload = async () => {
  applyTheme();
  await fetchAllData();
  initCharts();
  refreshAll();
};

async function fetchAllData() {
  try {
    const [aRes, pRes, vRes] = await Promise.all([
      fetch(`${API_BASE}/api/assets`),
      fetch(`${API_BASE}/api/products`),
      fetch(`${API_BASE}/api/vendors`)
    ]);

    assets = await aRes.json();
    products = await pRes.json();
    vendors = await vRes.json();

  } catch (err) {
    console.error("Data load error:", err);
    showToast("Server connection error");
  }
}

function refreshAll() {
  renderAssets();
  renderProducts();
  renderVendors();
  updateStats();
  updateCharts();
}

function updateStats() {
  document.getElementById('statTotal').innerText = assets.length;
  document.getElementById('statProducts').innerText = products.length;
  document.getElementById('statVendors').innerText = vendors.length;
}

function renderAssets() {
  const tbody = document.getElementById('assetTableBody');

  tbody.innerHTML = assets.map(a => `
    <tr>
      <td><b>${a.name}</b></td>
      <td>${a.type || '-'}</td>
      <td>${a.assignedTo || '-'}</td>
      <td><span class="badge ${a.status==='Active'?'badge-success':'badge-warning'}">${a.status || 'Active'}</span></td>
      <td>$${a.purchaseDate ? '—' : ''}</td>
      <td style="text-align:right;">
        <button class="btn btn-outline" onclick="editAsset('${a._id}')"><i class="fas fa-edit"></i></button>
        <button class="btn btn-outline" style="color:var(--danger);" onclick="deleteAsset('${a._id}')"><i class="fas fa-trash"></i></button>
      </td>
    </tr>
  `).join('');
}

function renderProducts() {
  const tbody = document.getElementById('productTableBody');

  tbody.innerHTML = products.map(p => `
    <tr>
      <td><b>${p.name}</b></td>
      <td>${p.category || '-'}</td>
      <td>${p.quantity || 0}</td>
      <td>$${p.price || 0}</td>
      <td><span class="badge ${p.quantity > 10 ? 'badge-success' : 'badge-danger'}">${p.quantity > 10 ? 'In Stock' : 'Low Stock'}</span></td>
      <td style="text-align:right;">
        <button class="btn btn-outline" onclick="editProduct('${p._id}')"><i class="fas fa-edit"></i></button>
        <button class="btn btn-outline" style="color:var(--danger);" onclick="deleteProduct('${p._id}')"><i class="fas fa-trash"></i></button>
      </td>
    </tr>
  `).join('');
}

function renderVendors() {
  const grid = document.getElementById('vendorGrid');

  grid.innerHTML = vendors.map(v => `
    <div class="vendor-card">
      <div class="vendor-actions">
        <button class="btn btn-outline" onclick="editVendor('${v._id}')"><i class="fas fa-pen"></i></button>
        <button class="btn btn-outline" style="color:var(--danger);" onclick="deleteVendor('${v._id}')"><i class="fas fa-trash"></i></button>
      </div>
      <h4>${v.name}</h4>
      <p>${v.email || '-'}</p>
      <p>${v.phone || '-'}</p>
    </div>
  `).join('');
}

/* ================= CRUD ================= */

async function saveAsset() {
  const payload = {
    name: document.getElementById('aName').value,
    type: document.getElementById('aCat').value,
    status: document.getElementById('aStatus').value,
    assignedTo: document.getElementById('aUser').value
  };

  await fetch(`${API_BASE}/api/assets`, {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify(payload)
  });

  closeModals();
  await fetchAllData();
  refreshAll();
}

async function deleteAsset(id) {
  await fetch(`${API_BASE}/api/assets/${id}`, { method: "DELETE" });
  await fetchAllData();
  refreshAll();
}

async function saveProduct() {
  const payload = {
    name: document.getElementById('pName').value,
    category: document.getElementById('pSku').value,
    quantity: document.getElementById('pStock').value,
    price: document.getElementById('pPrice').value
  };

  await fetch(`${API_BASE}/api/products`, {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify(payload)
  });

  closeModals();
  await fetchAllData();
  refreshAll();
}

async function deleteProduct(id) {
  await fetch(`${API_BASE}/api/products/${id}`, { method:"DELETE" });
  await fetchAllData();
  refreshAll();
}

async function saveVendor() {
  const payload = {
    name: document.getElementById('vName').value,
    email: document.getElementById('vEmail').value,
    phone: document.getElementById('vPhone').value
  };

  await fetch(`${API_BASE}/api/vendors`, {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify(payload)
  });

  closeModals();
  await fetchAllData();
  refreshAll();
}

async function deleteVendor(id) {
  await fetch(`${API_BASE}/api/vendors/${id}`, { method:"DELETE" });
  await fetchAllData();
  refreshAll();
}

/* ================= UTIL ================= */

function closeModals() {
  document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));
}

function showToast(msg) {
  const t = document.createElement('div');
  t.className = 'toast';
  t.innerHTML = `<i class="fas fa-check-circle" style="color:var(--success)"></i> ${msg}`;
  document.getElementById('toastContainer').appendChild(t);
  setTimeout(()=>t.remove(),3000);
}

function toggleTheme() {
  document.body.classList.toggle('dark-theme');
}

function applyTheme() {}

</script>


</body>
</html>
